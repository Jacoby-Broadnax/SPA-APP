<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" href="/assets/logo.png">
    <meta name="apple-mobile-web-app-title" content="SPA App">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#ffffff">
    
    <title>SPA App</title>
    <link rel= 'stylesheet' href="/main.css">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.min.js"></script>
    <script src="/navController.js"></script>
    <script src="/actionSheet.js"></script>
    <link rel="stylesheet" href="/vivify.min.css">
    <meta name="theme-color" content="#171717">
</head>
<body onload="document.getElementById('dyn-sheet').style.display = 'none';">

<div class="item-loader" id="item-loader">
    <img  src="https://i.gifer.com/ZZ5H.gif">
    <p>Loading Product...</p>
</div>

<div onclick="cartNav()" id="cartConfirm" class="cart-confirm">
    <div class="confirm-wrapper">
        <img src="/assets/shopping_cart_black_24dp.svg">
        <div class="confirm-text">
            <h4>Added To Cart</h4>
            <p id="cartItem">Placeholder Text</p>
        </div>
    </div>
    
</div>

<section id="cartpage">
    <iframe class="cart-frame" id="cartFrame" src="https://spa.ms/cart"></iframe>
    </section>


   <section id="homepage">
       <h1  class="page-title">Home</h1>
    <div class="search-wrapper">
        <div class="search-field">
            <img src="/assets/search-24px (1).svg">
            <input placeholder="" class="search-input" type="text">
        </div>
    </div>


<div class="item-wrapper" id="gradproducts"></div>
<div class="item-wrapper" id="gear"></div>
<div class="item-wrapper" id="rings"></div>

</section>


<div id="dyn-sheet" class="dyn-sheet ">
<div class="sheet-title">
    <div class="title-wrapper">
        <h2 id="sheetTitle">An Error Occured</h2>
    </div>
  
    <button onclick="dynClose()" class="close-sheet">Done</button>
</div>
<div class="product-overlay">
    <img src="/gradproducts/grad11.webp">
    <h4>2021 Sherpa Style Pullover</h4>
</div>
<iframe onload="document.getElementById('item-loader').style.display='none';" id="sheetFrame" class="sheet-frame vivify fadeIn duration-300 delay-1250" src="https://spa.ms/test2/?utm_source=rss&utm_medium=rss&utm_campaign=test2"></iframe>
</div>

<div class="bottom-navigation">
    <div class="bottom-wrapper">
        <button id="lIcon" onclick="listenNav()" class="default bottom-item ">
            <div class="bottom-icon">
                <img class="default-icon bicon" id="bicon1" src="Assets/home-24px.svg">
            </div>
            <p id="s1text">Home</p>
        </button>
 
        <button id="eIcon" onclick="eventsNav()" class="bottom-item">
         <div class="bottom-icon">
             <img id="bicon2" class="bicon" src="assets/account_circle-24px.svg">
         </div>
         <p id="s2text">Rewards</p>
     </button>
 
     <button id="cIcon" onclick="cartNav()" class="bottom-item">
         <div  class="bottom-icon">
             <img class="bicon" id="bicon3" src="Assets/shopping_cart-24px (3).svg">
         </div>
         <p id="s3text">Cart</p>
     </button>
 
     <button id="coIcon" onclick="contactNav()" class="bottom-item">
         <div class="bottom-icon">
             <img class="bicon" id="bicon4" src="assets/payment_black_24dp.svg">
         </div>
         <p id="s4text">Payments</p>
     </button>
    </div>
 </div>
 
 <script type="text/javascript">
    $(document).ready(function () {
      $.getJSON('https://api.sheety.co/1c0174d5b32dbebdf6f1e14d6ba67a4f/spa/gradproducts', function (data) {
        var template = Handlebars.compile($('#item-templateA').html())
        $('#gradproducts').html(template(data.gradproducts))
      })
    })
  </script>

  <script id="item-templateA" type="text/x-handlebars-template">
    <div class="product-wrapper">
        <div class="product-title">
            <h2 class="vivify fadeIn duration-300">Senior Grad Products</h2>
        </div>
     <div class="product-list">
        <div class="product-spacer"></div>
    {{#each this}}
  
    <div onclick="dynSheet('{{title}}', '{{url}}')" class="product-item vivify fadeIn delay-{{id}}00">
        <img src="gradproducts/grad{{id}}.webp">
        <div class="product-text">
            <h3>${{summary}}.00</h3>
            <p>{{title}}</p>
        </div>
    </div>
     
      {{/each}}
      </div>
      </div>   
  </script>


  <script type="text/javascript">
    $(document).ready(function () {
      $.getJSON('https://api.sheety.co/1c0174d5b32dbebdf6f1e14d6ba67a4f/spa/gear', function (data) {
        var template = Handlebars.compile($('#item-templateB').html())
        $('#gear').html(template(data.gear))
      })
    })
  </script>

  <script id="item-templateB" type="text/x-handlebars-template">
    <div class="product-wrapper">
        <div class="product-title">
            <h2 class="vivify fadeIn duration-300">Class Gear</h2>
        </div>
     <div class="product-list">
        <div class="product-spacer"></div>
    {{#each this}}
  
    <div onclick="dynSheet('{{title}}', '{{url}}')" class="product-item vivify fadeIn delay-{{id}}00">
        <img src="gear/gear{{id}}.png">
        <div class="product-text">
            <h3>${{summary}}</h3>
            <p>{{title}}</p>
        </div>
    </div>
     
      {{/each}}
      </div>
      </div>   
  </script>


  
  <script type="text/javascript">
    $(document).ready(function () {
      $.getJSON('https://api.sheety.co/1c0174d5b32dbebdf6f1e14d6ba67a4f/spa/rings', function (data) {
        var template = Handlebars.compile($('#item-templateC').html())
        $('#rings').html(template(data.rings))
      })
    })
  </script>

  <script id="item-templateC" type="text/x-handlebars-template">
    <div class="product-wrapper">
        <div class="product-title">
            <h2 class="vivify fadeIn duration-300">Mens Rings</h2>
        </div>
     <div class="product-list">
        <div class="product-spacer"></div>
    {{#each this}}
  
    <div onclick="dynSheet('{{title}}', '{{url}}')" class="product-item vivify fadeIn delay-{{id}}00">
     
        <img src="rings/{{title}}.png">
        <div class="product-text">
            <h3>${{summary}}</h3>
            <p>{{title}}</p>
        </div>
    </div>
     
      {{/each}}
      </div>
      </div>   
  </script>
  <script>
  window.addEventListener('message', function(e) {
  if(e.data == "addCart"){
   document.getElementById('dyn-sheet').style.display='none'
   document.getElementById('cartItem').innerHTML = document.getElementById('sheetTitle').innerHTML;
   document.getElementById('cartFrame').src="https://spa.ms/cart"

   setTimeout(function(){  
    document.getElementById('cartConfirm').style.bottom = "96px"
}, 500);
setTimeout(function(){  
    document.getElementById('cartConfirm').style.bottom = "-70px"
}, 4500);
  
   
  }

  if(e.data == "addCart"){

   
  }
});
  </script>
</body>
</html>